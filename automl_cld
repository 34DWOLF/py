import pandas as pd

# Example string
param_str = """const    13
ar.L1    -13
ma.L1     13
sigma2   13"""

# Parse into dict
params = dict(line.split() for line in param_str.splitlines())
params = {k: float(v) for k, v in params.items()}

print(params)

from statsmodels.tsa.arima.model import ARIMA
import matplotlib.pyplot as plt

# Ensure monthly frequency
model_data.index = pd.to_datetime(model_data.index)
model_data = model_data.asfreq("MS")

# Define ARIMA structure
order = (1, 1, 1)
model = ARIMA(model_data["Value"], order=order, freq="MS")

# Apply coefficients directly
fitted_model = model.filter(params)

# Forecast
steps = 12
forecast_res = fitted_model.get_forecast(steps=steps)
forecast_mean = forecast_res.predicted_mean
forecast_ci = forecast_res.conf_int()

# Plot
plt.figure(figsize=(10,6))
plt.plot(model_data.index, model_data["Value"], label="Observed", color="black")
plt.plot(forecast_mean.index, forecast_mean, label="Forecast", color="blue")
plt.fill_between(forecast_ci.index,
                 forecast_ci.iloc[:, 0],
                 forecast_ci.iloc[:, 1],
                 color="lightblue", alpha=0.4)
plt.title("ARIMA Forecast with Locked Coefficients")
plt.xlabel("Date")
plt.ylabel("Value")
plt.legend()
plt.show()
